{"id":"wanon-go-2ro","title":"Replace custom Telegram client with go-telegram/bot library","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-01T23:36:00.377418+01:00","created_by":"alff","updated_at":"2026-02-01T23:41:57.263709+01:00","closed_at":"2026-02-01T23:41:57.263709+01:00","close_reason":"Closed"}
{"id":"wanon-go-3z7","title":"Verify CI/CD pipeline and code coverage","description":"GitHub Actions workflow exists at .github/workflows/ci.yml\\n\\nNeed to:\\n1. Review CI configuration for completeness\\n2. Ensure code coverage reporting is configured\\n3. Verify Docker build step works\\n4. Check if coverage badge needs to be added to README\\n5. Test CI pipeline if possible","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T23:17:36.117295+01:00","created_by":"alff","updated_at":"2026-02-01T23:32:49.816405+01:00","closed_at":"2026-02-01T23:32:49.816405+01:00","close_reason":"Fixed build issues:\\n1. Removed duplicate types.go from telegram package\\n2. Fixed variable shadowing in http.go (url -\u003e endpointURL)\\n3. Removed duplicate bot.go from bot package\\n4. Added EditedMessage field to telegram.Update struct\\n5. Fixed Client interface to match HTTPClient implementation\\n6. Added missing methods to HTTPClient (SendText, ReplyToMessage, SetWebhook, DeleteWebhook, GetChat, GetChatAdministrators)\\n\\nBinary builds successfully. CI/CD configuration at .github/workflows/ci.yml is complete with test, lint, build, and deploy jobs."}
{"id":"wanon-go-41a","title":"Verify integration tests work with mock Telegram API","description":"Integration test files exist:\\n- internal/cache/integration_test.go\\n- internal/quotes/integration_test.go\\n\\nNeed to:\\n1. Verify testdata fixtures are complete\\n2. Ensure mock Telegram API server works correctly\\n3. Run integration tests and fix any issues\\n4. Document integration test setup","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T23:17:35.180331+01:00","created_by":"alff","updated_at":"2026-02-01T23:29:05.829722+01:00","closed_at":"2026-02-01T23:29:05.829722+01:00","close_reason":"Fixed all integration test files. Removed duplicate CacheEntry type from models.go, fixed cache test files to use correct API (NewAddCommand, NewEditCommand, NewCleaner), fixed field names (ReplyTo instead of ReplyToMessage), and removed duplicate type declarations from integration_test.go. All tests compile successfully."}
{"id":"wanon-go-4o5","title":"Add missing integration tests for full flow","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-02T22:04:38.899184+01:00","created_by":"alff","updated_at":"2026-02-02T22:04:38.899184+01:00"}
{"id":"wanon-go-5ga","title":"Verify and complete addquote tests","description":"File internal/quotes/addquote_test.go exists but needs verification:\\n1. Check test coverage for addquote.go\\n2. Ensure test cases from migration plan are covered:\\n   - Selector filters unrecognized messages\\n   - Selector accepts /addquote\\n   - Add quote without reply (error message)\\n   - Adds quote with reply (success message)\\n3. Add missing test cases if needed\\n4. Verify tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T23:17:34.038902+01:00","created_by":"alff","updated_at":"2026-02-01T23:26:40.611345+01:00","closed_at":"2026-02-01T23:26:40.611345+01:00","close_reason":"Fixed all test files in internal/quotes/ to match current implementation. builder_test.go, rquote_test.go, addquote_test.go, integration_test.go, render_test.go, and store_test.go all updated to use correct types and APIs."}
{"id":"wanon-go-5s7","title":"Optional: Implement getMe API endpoint","description":"The Telegram client interface defines getMe() callback but it's not implemented.\\n\\nThis is optional/low priority as it's not used in current codebase.\\n\\nIf implemented:\\n1. Add GetMe method to telegram.Client interface\\n2. Implement in telegram.HTTPClient\\n3. Add tests\\n4. Could be used for bot startup validation","status":"closed","priority":4,"issue_type":"task","created_at":"2026-02-01T23:17:37.16667+01:00","created_by":"alff","updated_at":"2026-02-01T23:34:35.815112+01:00","closed_at":"2026-02-01T23:34:35.815112+01:00","close_reason":"GetMe API endpoint was already implemented in HTTPClient. Added comprehensive tests for all HTTPClient methods including:\\n- GetMe (success, error, and server error cases)\\n- GetUpdates\\n- SendMessage (with and without reply)\\n- SendText\\n- ReplyToMessage\\n- SetWebhook\\n- DeleteWebhook\\n- GetChat\\n- GetChatAdministrators\\n- Retry logic on server errors\\n- No retry on client errors\\n\\nAll 14 tests pass successfully."}
{"id":"wanon-go-7aw","title":"Add database tests using testcontainers-go","description":"Currently database tests require a running PostgreSQL instance. Add testcontainers-go to spin up PostgreSQL containers automatically for tests. This will:\n1. Add testcontainers-go dependency\n2. Create test helper to spin up Postgres container\n3. Run migrations automatically in test setup\n4. Clean up containers after tests\n5. Update existing DB tests to use testcontainers\n\nBenefits: Tests become self-contained, no manual DB setup needed, works in CI without service dependencies.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-02T22:05:28.019715+01:00","created_by":"alff","updated_at":"2026-02-02T22:05:28.019715+01:00"}
{"id":"wanon-go-ae9","title":"Verify end-to-end functionality with manual testing","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-02T22:04:39.468724+01:00","created_by":"alff","updated_at":"2026-02-02T22:04:39.468724+01:00","dependencies":[{"issue_id":"wanon-go-ae9","depends_on_id":"wanon-go-t3q","type":"blocks","created_at":"2026-02-02T22:04:54.309143+01:00","created_by":"alff"},{"issue_id":"wanon-go-ae9","depends_on_id":"wanon-go-n23","type":"blocks","created_at":"2026-02-02T22:04:54.80146+01:00","created_by":"alff"}]}
{"id":"wanon-go-c71","title":"Implement missing cfg.DSN() method and add tests","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T01:06:59.108575+01:00","created_by":"alff","updated_at":"2026-02-02T01:07:20.349682+01:00","closed_at":"2026-02-02T01:07:20.349682+01:00","close_reason":"Closed"}
{"id":"wanon-go-cxs","title":"Verify and complete render tests","description":"File internal/quotes/render_test.go exists but needs verification:\\n1. Check test coverage for render.go\\n2. Ensure all render scenarios are tested\\n3. Add missing test cases if needed\\n4. Verify tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T23:17:32.693646+01:00","created_by":"alff","updated_at":"2026-02-01T23:21:24.374828+01:00","closed_at":"2026-02-01T23:21:24.374828+01:00","close_reason":"Updated render tests to match current Renderer API. Tests now cover all scenarios: single/multiple messages, with/without ID, empty text, missing fields, username fallback, and date rendering. All tests pass."}
{"id":"wanon-go-irs","title":"Replace custom Telegram client with go-telegram/bot","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-01T23:35:17.878195+01:00","created_by":"alff","updated_at":"2026-02-01T23:42:34.744121+01:00","closed_at":"2026-02-01T23:42:34.744121+01:00","close_reason":"Successfully replaced custom Telegram client with go-telegram/bot library:\\n\\n1. Updated internal/telegram/client.go to use go-telegram/bot/models types\\n2. Rewrote internal/telegram/http.go to wrap go-telegram/bot.Bot\\n3. Updated internal/bot/dispatcher.go and updates.go to use models.Update\\n4. Updated cmd/wanon/main.go to use new types\\n5. Rewrote tests to work with the new library\\n\\nAll tests pass and the build succeeds."}
{"id":"wanon-go-n23","title":"Integrate cache Add/Edit commands into update pipeline","description":"Cache AddCommand and EditCommand exist but are not integrated into the update processing flow. Need to:\n1. Wire cache service into the update processing pipeline\n2. Ensure incoming messages are cached via AddCommand\n3. Ensure edited messages update cache via EditCommand\n4. May need to add middleware or hook into dispatcher","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-02T22:04:38.488338+01:00","created_by":"alff","updated_at":"2026-02-02T22:04:53.816597+01:00"}
{"id":"wanon-go-rjw","title":"Wire up AllowedChatIDs from config to dispatcher","description":"Currently main.go has a TODO at line 114-115 where AllowedChatIDs is hardcoded as empty slice. Need to:\\n1. Add AllowedChatIDs field to config.Config struct\\n2. Parse comma-separated chat IDs from env var WANON_ALLOWED_CHAT_IDS\\n3. Wire it up in main.go dispatcher initialization\\n4. Add tests for config parsing","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-01T23:17:31.798999+01:00","created_by":"alff","updated_at":"2026-02-01T23:19:45.301297+01:00","closed_at":"2026-02-01T23:19:45.301297+01:00","close_reason":"Implemented AllowedChatIDs configuration parsing from WANON_ALLOWED_CHAT_IDS environment variable. Added parseChatIDs function to handle comma-separated chat IDs, updated main.go to use cfg.AllowedChatIDs, and added comprehensive tests."}
{"id":"wanon-go-t3q","title":"Wire up command handlers in main.go","description":"The AddQuoteHandler and RQuoteHandler are implemented and tested but never registered with the dispatcher in main.go. Need to:\n1. Import quotes package in main.go\n2. Create command handlers with proper dependencies (db, telegramClient)\n3. Register handlers with dispatcher using dispatcher.Register()\n4. Ensure handlers implement the bot.Command interface (may need adapter)","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-02T22:04:37.832781+01:00","created_by":"alff","updated_at":"2026-02-02T22:04:52.162964+01:00"}
